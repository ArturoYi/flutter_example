# Realm æ•°æ®åº“ç¤ºä¾‹

è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨ [Realm](https://realm.io/) æ•°æ®åº“çš„ Flutter ç¤ºä¾‹é¡¹ç›®ï¼Œå±•ç¤ºäº†å¦‚ä½•åœ¨ Flutter åº”ç”¨ä¸­å®ç°è·¨å¹³å°çš„æœ¬åœ°æ•°æ®å­˜å‚¨å’ŒåŒæ­¥åŠŸèƒ½ã€‚

## ğŸ“‹ é¡¹ç›®ç®€ä»‹

Realm æ˜¯ä¸€ä¸ªè·¨å¹³å°çš„ç§»åŠ¨æ•°æ®åº“å¼•æ“ï¼Œæä¾›å¯¹è±¡å­˜å‚¨å’Œå®æ—¶åŒæ­¥åŠŸèƒ½ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š

- ğŸŒ **è·¨å¹³å°ä¸€è‡´æ€§**ï¼šæ”¯æŒ Androidã€iOSã€Flutter ç­‰å¤šä¸ªå¹³å°
- ğŸ”„ **å®æ—¶åŒæ­¥**ï¼šæ”¯æŒäº‘ç«¯æ•°æ®åŒæ­¥
- ğŸ›¡ï¸ **æ•°æ®åŠ å¯†**ï¼šå†…ç½®åŠ å¯†åŠŸèƒ½ä¿æŠ¤æ•æ„Ÿæ•°æ®
- ğŸ¯ **å¯¹è±¡ API**ï¼šç›´è§‚çš„å¯¹è±¡å¯¼å‘æ•°æ®è®¿é—®
- âš¡ **é«˜æ€§èƒ½**ï¼šä¼˜åŒ–çš„æŸ¥è¯¢å¼•æ“å’Œå†…å­˜ç®¡ç†

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

æœ¬ç¤ºä¾‹å®ç°äº†ä»¥ä¸‹åŠŸèƒ½ï¼š

- âœ… **äººå‘˜ç®¡ç†**ï¼šåˆ›å»ºã€è¯»å–ã€æ›´æ–°ã€åˆ é™¤äººå‘˜ä¿¡æ¯
- âœ… **åœ°å€å…³è”**ï¼šä¸€å¯¹ä¸€å…³ç³»æ˜ å°„ï¼ˆPerson å’Œ Addressï¼‰
- âœ… **æ•°æ®æŒä¹…åŒ–**ï¼šæ•°æ®è‡ªåŠ¨ä¿å­˜åˆ°æœ¬åœ°æ•°æ®åº“
- âœ… **ç‰ˆæœ¬è¿ç§»**ï¼šæ•°æ®åº“æ¶æ„ç‰ˆæœ¬ç®¡ç†
- âœ… **å“åº”å¼ UI**ï¼šæ•°æ®å˜æ›´è‡ªåŠ¨æ›´æ–°ç•Œé¢

## ğŸ“± åº”ç”¨æˆªå›¾

åº”ç”¨æä¾›äº†ä¸€ä¸ªäººå‘˜ä¿¡æ¯ç®¡ç†ç•Œé¢ï¼š
- äººå‘˜åˆ—è¡¨æ˜¾ç¤ºï¼ˆå§“åã€å¹´é¾„ã€é‚®ç®±ã€åœ°å€ä¿¡æ¯ï¼‰
- ç¼–è¾‘äººå‘˜ä¿¡æ¯åŠŸèƒ½
- åˆ é™¤äººå‘˜åŠŸèƒ½
- æ·»åŠ æ–°äººå‘˜ï¼ˆè‡ªåŠ¨å…³è”åœ°å€ä¿¡æ¯ï¼‰

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **Flutter**: 3.3.4+
- **Realm**: 20.0.1
- **Dart**: 3.3.4+

## ğŸ“¦ å®‰è£…ä¸è¿è¡Œ

### ç¯å¢ƒè¦æ±‚
- Flutter SDK â‰¥ 3.3.4
- Dart SDK â‰¥ 3.3.4
- Android Studio / VS Code

### å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**
```bash
git clone <repository-url>
cd realm_example
```

2. **å®‰è£…ä¾èµ–**
```bash
flutter pub get
```

3. **è¿è¡Œé¡¹ç›®**
```bash
flutter run
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
realm_example/
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ main.dart                  # ä¸»åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ person.dart            # Person å®ä½“ç±»å®šä¹‰
â”‚   â”‚   â””â”€â”€ person.realm.dart      # Realm ç”Ÿæˆçš„ä»£ç 
â”‚   â”œâ”€â”€ database/
â”‚   â”‚   â””â”€â”€ database_manager.dart  # æ•°æ®åº“ç®¡ç†å™¨
â”‚   â””â”€â”€ repositories/
â”‚       â””â”€â”€ person_repository.dart # Person ä»“åº“ç±»
â”œâ”€â”€ pubspec.yaml                   # é¡¹ç›®ä¾èµ–é…ç½®
â””â”€â”€ README.md                      # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

## ğŸ”§ æ ¸å¿ƒç»„ä»¶

### 1. æ•°æ®æ¨¡å‹

#### Person æ¨¡å‹
```dart
@RealmModel()
class _Person {
  @PrimaryKey()
  late String id;
  
  late String name;
  late int age;
  String? email;
  
  late _Address? addresses;
}
```

#### Address æ¨¡å‹
```dart
@RealmModel()
class _Address {
  @PrimaryKey()
  late String id;
  
  late String street;
  late String city;
  late String country;
  String? postalCode;
}
```

### 2. æ•°æ®åº“ç®¡ç†å™¨

è´Ÿè´£ Realm æ•°æ®åº“çš„åˆå§‹åŒ–ã€é…ç½®å’Œç‰ˆæœ¬ç®¡ç†ã€‚

### 3. ä»“åº“å±‚

å°è£…æ•°æ®è®¿é—®é€»è¾‘ï¼Œæä¾› CRUD æ“ä½œæ¥å£ã€‚

## ğŸ’¡ å…³é”®ç‰¹æ€§è¯´æ˜

### å…³ç³»æ˜ å°„
- **ä¸€å¯¹ä¸€å…³ç³»**ï¼šPerson å’Œ Address ä¹‹é—´çš„ä¸€å¯¹ä¸€å…³è”
- **å¯é€‰å…³ç³»**ï¼šAddress å­—æ®µä¸ºå¯é€‰ï¼Œæ”¯æŒç©ºå€¼

### ç‰ˆæœ¬ç®¡ç†
- é€šè¿‡ `schemaVersion` ç®¡ç†æ•°æ®åº“ç‰ˆæœ¬
- ä½¿ç”¨ `migrationCallback` å¤„ç†æ¶æ„å˜æ›´
- æ”¯æŒæ•°æ®è¿ç§»å’Œå­—æ®µå˜æ›´

### æ•°æ®åŒæ­¥
- æ”¯æŒ Realm äº‘æœåŠ¡åŒæ­¥
- éœ€è¦é¢å¤–çš„èº«ä»½éªŒè¯å’Œé…ç½®
- æœ¬ç¤ºä¾‹ä¸“æ³¨äºæœ¬åœ°æ•°æ®å­˜å‚¨

## ğŸ” ä½¿ç”¨ç¤ºä¾‹

### åˆ›å»ºäººå‘˜
```dart
final person = _personRepository.createPerson(
  'å¼ ä¸‰', 
  25, 
  email: 'zhangsan@example.com'
);
```

### æ·»åŠ åœ°å€ä¿¡æ¯
```dart
_personRepository.addAddress(
  person,
  'æŸæŸè·¯æŸæŸå·',
  'ä¸Šæµ·',
  'ä¸­å›½',
  postalCode: '200000',
);
```

### æŸ¥è¯¢æ‰€æœ‰äººå‘˜
```dart
List<Person> persons = _personRepository.getAllPersons();
```

### æ›´æ–°äººå‘˜ä¿¡æ¯
```dart
_personRepository.updatePerson(
  person,
  name: '${person.name}(æ›´æ–°)',
  age: person.age + 1,
);
```

### åˆ é™¤äººå‘˜
```dart
_personRepository.deletePerson(person);
```

## ğŸ”„ æ•°æ®åº“ç‰ˆæœ¬è¿ç§»

### ç‰ˆæœ¬é…ç½®
```dart
final config = Configuration.local(
  [Person.schema, Address.schema],
  schemaVersion: 1,
  migrationCallback: (migration, oldSchemaVersion) {
    // å¤„ç†ç‰ˆæœ¬è¿ç§»é€»è¾‘
  },
);
```

### è¿ç§»ç­–ç•¥
- å¢åŠ  `schemaVersion` è§¦å‘è¿ç§»
- åœ¨ `migrationCallback` ä¸­å¤„ç†å­—æ®µå˜æ›´
- æ”¯æŒå­—æ®µé‡å‘½åã€ç±»å‹è½¬æ¢ç­‰æ“ä½œ

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æ¨¡å‹å®šä¹‰**ï¼šä½¿ç”¨ `@RealmModel()` æ³¨è§£å®šä¹‰æ¨¡å‹
2. **ä¸»é”®è®¾ç½®**ï¼šæ¯ä¸ªæ¨¡å‹éƒ½éœ€è¦ `@PrimaryKey()` å­—æ®µ
3. **å…³ç³»ç®¡ç†**ï¼šæ³¨æ„å…³ç³»çš„å¯é€‰æ€§å’Œçº¦æŸ
4. **ç‰ˆæœ¬è¿ç§»**ï¼šæ¶æ„å˜æ›´æ—¶éœ€è¦æ‰‹åŠ¨å¤„ç†è¿ç§»é€»è¾‘
5. **åŒæ­¥åŠŸèƒ½**ï¼šéœ€è¦é¢å¤–çš„ Realm äº‘æœåŠ¡é…ç½®

## ğŸ”— ç›¸å…³èµ„æº

- [Realm å®˜æ–¹æ–‡æ¡£](https://docs.mongodb.com/realm/)
- [Realm Flutter SDK](https://github.com/realm/realm-dart)
- [Flutter å®˜æ–¹æ–‡æ¡£](https://docs.flutter.dev/)

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚

---

**è¿”å› [é¡¹ç›®æ€»è§ˆ](../README.md)**
